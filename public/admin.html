<!DOCTYPE html>
<html>
<head>
  <title>Admin - TikTok Filter</title>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; max-width: 500px; margin: 60px auto; padding: 20px; line-height: 1.6; color: #333; }
    h2 { font-weight: 700; margin-bottom: 20px; }
    label { font-size: 14px; font-weight: 600; display: block; margin-bottom: 5px; }
    input, textarea { width: 100%; padding: 12px; margin-bottom: 20px; border: 1px solid #ccc; border-radius: 8px; box-sizing: border-box; font-size: 16px; }
    button { background: #000; color: white; padding: 14px; border: none; border-radius: 8px; width: 100%; cursor: pointer; font-size: 16px; font-weight: 600; }
    button:hover { background: #333; }
  </style>
</head>
<body>

  <h2>‚ûï Add TikTok Campaign</h2>
  
  <label for="tiktokUrl">TikTok Video URL</label>
  <input type="text" id="tiktokUrl" placeholder="https://www.tiktok.com/@user/video/123...">

  <label for="keywords">Keywords (One per line)</label>
  <textarea id="keywords" placeholder="price&#10;how much&#10;available" rows="6"></textarea>

  <button onclick="addCampaign()">Start Monitoring</button>

  <script>
    async function addCampaign() {
      const tiktokUrl = document.getElementById('tiktokUrl').value;
      const keywords = document.getElementById('keywords').value
        .split('\n')
        .map(k => k.trim())
        .filter(k => k.length > 0);

      if (!tiktokUrl) return alert("Please enter a URL");

      const btn = document.querySelector('button');
      btn.innerText = "Saving...";
      btn.disabled = true;

      try {
        const response = await fetch('/api/add-video', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ tiktokUrl, keywords })
        });

        const result = await response.json();
        if (result.success) {
          alert("üöÄ Success! Video added to monitoring.");
          document.getElementById('tiktokUrl').value = '';
          document.getElementById('keywords').value = '';
        } else {
          alert("‚ùå Error: " + result.error);
        }
      } catch (err) {
        alert("‚ùå Failed to connect to server.");
      } finally {
        btn.innerText = "Start Monitoring";
        btn.disabled = false;
      }
    }
  </script>
</body>
</html>